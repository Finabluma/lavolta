<template>
  <svg
    id="grafico"
    viewBox="0 0 693.61 277.31"
    preserveAspectRatio="xMidYMin slice"
  >
    <path
      id="corazon"
      ref="corazon"
      d="M680.5 86.2a31.66 31.66 0 0 1-5.7 7.5c-2.5 2.5-4 5.6-5.6 8.7a37.91 37.91 0 0 1-2 3.4c-.8 1.1-1.6 1-2.4-.1-1.2-1.7-7.2-18.6-7.8-19.6a7.3 7.3 0 0 1-1.1-4.3 16.11 16.11 0 0 1 .6-4.4c.4-1.7 2-2.3 3.4-2.7 2.8-.6 4.8.7 6.1 3.7.8 1.7 1.4 3.5 2.2 5.4a1.61 1.61 0 0 0 .4-.7 3 3 0 0 1 2.5-2 11.33 11.33 0 0 1 8.8 1.2c1.1.5 1.3 2.5.6 3.9Z"
      transform="translate(0 .01)"
    />
    <path
      id="trazado"
      class="fill-shape"
      ref="trazado"
      d="M663.5 259.1c.5 1.1 1 2.1 1.8 3.9l-3.8-.8c-4.4 2.1-.3 5.8-2 8.9l-2.4-2.5-4.9 2c.2 2.2.5 4.3.7 6.5l-.6.2a39.72 39.72 0 0 0-2-3.5 9.14 9.14 0 0 0-2-2.4 15 15 0 0 1-2.2.2 4.75 4.75 0 0 0-.6 2.6 4.47 4.47 0 0 1-1.2 2.7l-1.5-5.6c-.4-.1-.7-.1-1.1-.2l-2.8 4.1c-2.1-1-1.6-2.6-.9-4.2a2.61 2.61 0 0 0 .3-1.1 17.24 17.24 0 0 1-4.9-3.6 21.4 21.4 0 0 0-2.2 1 28.32 28.32 0 0 0-2.8 2c.2-1.3.3-2.6.6-3.8s.6-2.7 1-4.7c-2.2.6-3.4 1.2-4.7 1.1-1 0-2.1-.8-3.1-1.3a12.35 12.35 0 0 1 2.7-1.7 22.26 22.26 0 0 1 3.6-.5c-.6-3.1-1.1-5.7-5.1-4.2-.6.2-1.6-.7-2.4-1.1a14.29 14.29 0 0 1 2-1.4 26.14 26.14 0 0 1 2.7-.6c.8-.3 1.8-1.3 1.7-1.6a3.89 3.89 0 0 0-1.8-2.2c-2.3-.7-3.8-1.8-3.9-5l8.1 3.5c0-2.8.1-4.9.1-7.4l2.6 1.4c6.4-.8 2-5.1 2.8-8.6l3.5 5.4 3.1-.8c-.3-1.9-.7-3.6-1-5.4l.8-.3a23.68 23.68 0 0 1 1.7 3.6 2.89 2.89 0 0 0 3.2 2.4 1.45 1.45 0 0 0 .7-.2c.8-.3 1.2-2 1.6-3.1a11.4 11.4 0 0 0 .2-2.6l.9-.1c.4 2.2.8 4.5 1.4 7.4l3.5-3.9c.1 1.2.2 2.3.4 3.5a16.9 16.9 0 0 0 2 5c.3.5 2.4-.4 4.2-.7-.1.8.1 1.9-.3 2.6-1.8 3-.8 5.7 2.7 6.8a14 14 0 0 1 2.6 1.6l-2.4 1.2a13.78 13.78 0 0 0-2.5 1.9v.1c-.4-1-.9-2-1.3-3.1-2.6-7.8-11.3-11.2-18.1-9.4a15.86 15.86 0 0 0-2 5.5c.1.5.2 1.1.3 1.6a3.89 3.89 0 0 1-.2 2.8c-.5 2.4.8 3.2 2 4.2s-.1.6-.5 1.7c.6.5 1.8 1.2 1.4 2.2l.1.2c.8-.3 1.6 0 1.3 1v.4a2.65 2.65 0 0 0 .6.5 8.75 8.75 0 0 0 1.6.2c.8.1.5 1.1 1.9 2.2a19.56 19.56 0 0 0 5.8 1.8c2.2-1 3.7-2.9 4.6-7.3.3-1.6 1.6-3 2.5-4.5l.1-.1a40 40 0 0 1 1.8 3.6Zm-467.3-27.9-5.5 3.3c-1.1-1.3-3.1-2.8-2.9-4s2.5-2.6 4.2-2.9c.8-.1 2.2 1.9 4.2 3.6ZM177.5 221c-1.5.6-2.9 1.2-4.7 1.9-.7-2.4-1.4-4.5-2-6.7-4.4 5.4-1 10.2-.3 15.2l1.5.7 9.3-8.7c.3-2.5-.8-3.5-3.8-2.4Zm57 16.6-5.6 3.8 5.4 4.7c1.2-1.6 3.2-3.1 3.4-4.7.2-1.2-2.1-2.6-3.2-3.8Zm-84.3-12.4c1.5 1.6 2.6 3.8 4.6 4.7.9.4 3.3-1.4 5.1-2.1a12.25 12.25 0 0 0 .2-1.9c-1.6-.9-3.1-2.5-4.7-2.6s-3.5 1.2-5.2 1.9ZM119 217c-1.1-.2-2.9 1.7-5.4 3.3 2.4 2.1 4 3.4 5.6 4.8 1.2-1.5 3.2-3 3.3-4.5.1-1.2-2-3.3-3.5-3.6Zm-77.3 1c-.3 1.3-.7 2.7-1.4 5.1 2.8.2 4.8.6 6.5.2.5-.1 1-3.1.2-3.7-1.2-1-3.4-1.1-5.3-1.6Zm18.7-4.8-1.7.9c0 1.6-.8 3.8.2 4.8s3.6.8 5.6 1.1c.3-1.4 1.4-3.3.7-4.2-.9-1.3-3.2-1.8-4.8-2.6Zm-30.1 11.5a15.59 15.59 0 0 0-6.3-1.4c-.4 0-1.7 3.3-1.4 3.5A60.61 60.61 0 0 0 31 230c-.3-2.8.1-4.9-.7-5.3Zm-23.5.2c-2.3.1-4.5 1.1-6.8 1.7l3 3.9 6.2-2c-.7-1.3-1.6-3.7-2.4-3.6ZM99 211.4l-1.4.7c.6 2.7 1.2 5.4 2.2 9.5l5.5-6.6c-4.8 2.5-5.4-.7-6.3-3.6Zm165 31.1c-1.2-.1-2.6 1.8-4.9 3.5l5.3 4.6c1.1-1 2.7-2 3.2-3.2.9-2.5-.2-4.7-3.6-4.9ZM77.3 212c-.3 1.7-.6 3.5-1.1 6.1l7.2.9c.1-1.6 1.1-4 .2-4.8-1.5-1.2-4.2-1.5-6.3-2.2Zm58.2 9.6c.3 1.9 1.9 3.6 3 5.4l5-4-4.8-4.8c-1.1 1.1-3.4 2.4-3.2 3.4Zm45.8 1.8.1-.1Zm305.2 1.7c.9 1.7 2.8 3 4.3 4.5 1.4-1.1 3.9-2.3 3.9-3.3 0-1.5-2-2.9-3.9-5.3-2.2 2-4.6 3.5-4.3 4.1Zm108.1-30.5c-.9 1.9-1.9 3.7-2.5 5l-7.2-2.2c1 2.1 1.7 4.4 3.1 6.3a9.69 9.69 0 0 0 4.5 2.3 29.69 29.69 0 0 0 5.4-7.1c.5-1.2-1.1-3.1-1.8-4.6Zm-30.2 6.7c.2 1.6 2.2 3.1 4.3 5.5l5.4-4.5c-1.7-1.4-3.2-3.3-5.2-3.8-1.1-.3-4.6 1.9-4.5 2.8Zm-45.4 7.3c-1.2-.1-3.8 2.2-3.7 2.6 1 2 2.8 3.7 4.9 6.3 2.2-2 4-2.9 4.2-3.9.6-3.3-2.1-4.8-5.4-5Zm20.4-4.8c-.8.1-2.4 2.3-2.1 2.8.9 1.2 2.6 2.1 4.9 3.7-.1-2.1-.2-3.1-.3-4.2l3.8-.1.3-1.5a24.72 24.72 0 0 0-6.6-.7Zm153.2-48.4c-3.4 1.6-6.8 2.4-6.7 3.2a13.76 13.76 0 0 0 2.3 6.6c.2.3 5.2-.8 5.3-1.6.4-2.2-.4-4.6-.9-8.2Zm-77.3 41.1 2.3 5.5 1.8 2.1c1.3-1 3.7-2.2 3.6-3.1a9.72 9.72 0 0 0-2.8-5.5c-.5-.4-3.2.7-4.9 1Zm44.2-23.2c1.3 2.1 2.2 4.5 4 6.1.8.7 3.6-.4 5.4-.8l-3.9-7.7c-2.6 1.2-4.1 1.8-5.5 2.4ZM634 187.5c1 2 1.8 4.2 3.3 5.9.3.4 4.4-.7 4.4-1.1 0-1.8-.8-3.6-1.4-6.1l-6.3 1.3Zm-274.1 63.1c.3 1.6 1.8 3.1 2.7 4.6l5.2-5.1c-1.8-1.4-2.8-2.9-4-3.1-3-.5-4.3 1.4-3.9 3.6Zm-16.9-9.8c-5.9 3.1-5.9 3.2-9.5-1.1-3.2 2.9-1.5 11.6 2.7 13a3.13 3.13 0 0 0 2.5-.2c3.5-3.6 8.7-6.4 8-12.4a11.56 11.56 0 0 0-3.7.7Zm-34.3 3c-1.3-.1-2.8 1.4-5.6 3.1a66.57 66.57 0 0 0 6.6 5.3c.2.1 2.8-1.5 3.1-2.6.6-2.8-.2-5.5-4.1-5.8Zm-20.9-.4c-.4-.3-2.8 1.3-5.6 2.6 2.7 2.2 4.2 3.7 6.1 4.7.3.2 3.3-2 3.1-2.5a11.31 11.31 0 0 0-3.6-4.8Zm88 7c.3 1.5 2.2 3 3.8 4 .3.2 2.5-1.6 4.9-3.2l-5.2-4.3c-1.3 1.2-3.7 2.6-3.5 3.5Zm57.7-8c-1-.4-4.5 1.9-4.9 3.3s1.7 3.3 3.3 6c2.9-2.2 6.2-3.7 6.1-4.8-.3-1.6-2.5-3.7-4.5-4.5Zm25.5-5.8c-1.4-.1-4.1 1.3-4.3 2.2-.7 3.6 2.4 4.7 7.4 5.4.7-.6 2.9-1.6 3.2-2.9.7-3.8-3.2-4.4-6.3-4.7Zm-57.8 8.8c-1.1 1.5-2.9 2.9-3.3 4.5-.7 3.2 1.9 4.8 5.2 5.3 4.2.6 3.9-2.2 4.2-4.4.6-3.3-1.7-4.3-6.1-5.4ZM223 77.8c-1-.4-1.6-.5-1.8.8l1.4.5c.2-.6.3-.9.4-1.3Zm-4.7.3c.3-.1.4-.6.6-1-1.2-.4-1.6-.8-2.3.8a6.24 6.24 0 0 0 1.7.2Zm9.3 1.4a7.72 7.72 0 0 0-1.5-.2c-.1 0-.1.5-.2.8.9.2 1.2.4 1.7-.6Zm27.1 72.3c.7 8.6-9.4 16-17.7 14.5a180.1 180.1 0 0 1-5.2 24c3.2-4.8 13.1-12.1 17.9-6.6-1.6 4.5-3.9 9.4-8.2 11.8-7.6 5.6-12.4.2-12 4.3-.1 9.5-13.6 37.6-12.9 38.3-5.9 7-8.6.6-8.6-.9 0-1.3 2.1-2.6 3.3-3.9.2.2 13.6-20.5 14.7-31.7 2.2-11.1-11.4-5.5-15.6-24 8-1.8 17.8 2.7 18.1 11.6 14.3-38.4-1.8-12.4-13-32.6-.3-1.4-2.4-3.9-.2-4.5 7.3-1.6 15.8 1.2 19.5 8.1 1.7-8.6-.4-17.8-3.6-25.9-1.1-2.1-4.1.1-6-.2A14.5 14.5 0 0 1 213 130c-3.1-3.8 6.7-5 9.1-4.2 3 .3 5.3 1.6 7.8 3.3-1.7-7.5-6.9-26.7-13.4-30.3-9.4 3-14.4-11.3-6.2-15.9 10.9-10.8 30 5.3 12.6 12.7-2.9 5.7 3.3 11.5 4.7 17 1 3.6 2.3 7.2 3.4 10.8.5 1.4.8 2.9 1.2 4.4l.4.1c1-5.3 5.3-10.6 11.2-9.8 4.7 3.1-5.1 13.7-9.7 13.4-1 .1-.8.8-.6 1.4 3.5 9.2 5.2 19.3 3.6 29l.3.2c3.7-5.8 8.2-12.5 16-12 1.2 0 1.5.5 1.3 1.7Zm-34.1-64.3c-4.1-1.3-9.5 2.6-8.9 6.8l.4.1c.4-2.9 1.9-4.8 4.9-5.3 3.5-.6 5.1 1.5 6.2 4.6 2-2.5-.2-5.2-2.6-6.2Zm-11.7 2.6c3.6-7.2 15.4-10.1 19.9-2.3-1.2-13.2-26-6.2-20.9 5.8a17.9 17.9 0 0 1 1-3.5Zm4.7 8.1c-4.9-3.1-2.9-9.2 1.8-11.2 4.3-2.9 11.3 1.5 9.4 6.8 5.5-1.7 3.7-8.8-1.3-9.4-8.9-3.5-20.7 9.6-10 14.1Zm2.5-7.6c-2.2 1.1-2.1.6-2.7 3.1-.6 1.3 1.1 2.3 1.7 3.3.5.4 1.8 0 2.3 0 .7-1.7.9-2.8 3.1-2.2 4.3-1.7-2.2-7-4.4-4.2Zm-1.5-11.7c.3-1.6.1-2-1.3-1.9-.8 1 .1 1.4 1.3 1.9Zm-5.8 1 .2.5c4.2.3 1.2-3.8-.2-.5Z"
      transform="translate(0 .01)"
    />
    <path
      id="carta"
      class="fill-shape"
      d="M620.3 73.7c12.2 7.6 16.7 23.3 22 35.3 3.7 5.2 1.1 14.3 8.9 15.4-18.1 20.7-27.1-6.6-30.1-20.8-11.5 19.3-20 25.5-22-2.8-19-16.1 4.4-35.4 21.2-27.1Zm-7.6 13.7c-6.9 8.3-6.7 22.7-3.9 25 10.6-1.4 15.7-20.1 3.9-25Zm-78.9-41.7c-9.7 56.2 41.6 16.3 27.7 33-36.1 6.3-28.7-1.1-23.8 44.9.4 16.5 47.5-27.4 56-31.6 2.5 1.8-14.3 11.8-17 16.7-6 7.2-6.5 18.2-14.7 24.3-8.9 18.2-47.8 6.6-45.6-15.8-2.2-40.3 19.8-30.8-23-41.8 4.1-5.5 20.7 1.3 27.8-.5 6.1-5 5.2-37 12.6-29.2Zm-80.7 23.2c-11.9 34.8 23.7 0 29.8 22.9 3.1 13.3.1 23.3 1.8 35.3.4 2.3 3.3 7 .4 9.9-11.6 6.8-23.6-11-25.4-26.1-1.2-16.6 4.9-18.7-13.6-23.6-.7 2.4-5.8 6.4-7.3 6.2 1.8-1.4 5.8-6.3 6-8.7-4.2-4.5 4.7-24.5 8.3-15.9Zm-4.1 3.8c-.4 1.5-1.5 4.8-.5 6.4.8-1.7 4.3-6.9.5-6.4Zm-67.2 2.1c30.6-8.6 21.4 44.2 41.9 31 5.1-3.5 14-13.4 17-13.3-12.9 9.2-11.2 20.4-22.2 27.3-22.7 5.8-19.2-16.1-25.9-33-3.2 13.1-6.6 47.7-22.5 28-21.5-8.8-8.1-39 11.7-40Zm-4.4 16c-4.5 3.4-4.8 11-.9 15.2 14.8 4.7 21.1-39.4.9-15.2Zm-94-10.3c.2 1.1-2.3 5.1-2.3 2.3-6.2-10-16 16.8-14.2 23.6 6.1 55.3 60.3 9.3 85.6-8C375 81 336.8 113 330.9 117.7c-84.3 65.8-85.7-42.6-47.5-37.2Zm-100.2 3.9c4.6-3.4-2.1 23.8 1.2 28.7-1.7 7.3 15.3 11.6 4.8 12.8-16.3 5.9-9.5-37.8-20.9-7.6-43.5 52.2-62.9-63.4 14.9-33.9Zm-24.3 9.9c-16 4.6-7.5 20.3.5 26.6 10-1.3 19.7-33.8-.5-26.6ZM98.6 11.8c-19.3-50.4-36.9 105-14.7 56.7 7.6-11.8 9.3-50.7 14.2-52.2-5.2 20-5.1 44.1-16.3 62.8-7.6 4.4-4.5 11.7-3 19.9 6.9 20.4 1.6 48.3 29.6 50 17.2 6.6 124.7.4 39.7 42.2-46.2 4.9-106.7-24.8-84-77.8 1.8-17.8-.1-33.3 1.6-52-.7-15.8 21.9-89.8 32.9-49.6Z"
      transform="translate(0 .01)"
      ref="carta"
    />
  </svg>
</template>

<script>
import gsap from "gsap";
import { ScrollTrigger } from "gsap/dist/ScrollTrigger";
import { DrawSVGPlugin } from "gsap/dist/DrawSVGPlugin";
gsap.registerPlugin(ScrollTrigger, DrawSVGPlugin);
export default {
  data: () => ({
    tlGrafico: new gsap.timeline({
      paused: true,
    }),
  }),
  methods: {
    Grafico() {
      const { corazon, trazado, carta } = this.$refs;
      const tl = this.tlGrafico;

      gsap.to(corazon, {
        duration: 1.5,
        drawSVG: "100% 100%",
        fillOpacity: 0.8,
        strokeOpacity: 0.7,
        stroke: "orange",
        strokeWidth: 2,
        transformOrigin: "center center",
        yoyo: true,
        repeat: -1,
      });

      tl.to(carta, {
        yPercent: "+=10",
        strokeOpacity:0.3,
        fillOpacity: 0.1,
      }).to(
        trazado,
        {
          yPercent: "-=40",
          autoAlpha: 0,
        },
        "0"
      );

      ScrollTrigger.create({
        trigger: this.$parent.$refs.hero,
        animation: tl,
        start: "top top",
        end: "bottom top",
        pin: this.$parent.$refs.title,
        pinSpacing: false,
        scrub: 1,
      });
    },
  },
  mounted() {
    this.Grafico();
  },
};
</script>

<style lang="postcss" scoped>
#grafico {
  @apply w-8/12
    mx-auto
    sm:w-9/12
    lg:w-10/12
    2xl:max-w-2xl;

  & .fill-shape {
    @apply fill-white
    stroke-white
    stroke-1
    dark:fill-gray-300
    dark:stroke-white/30;
  }

  & #corazon {
    fill: #e30613;
    stroke: #e30613;
  }
}
</style>
